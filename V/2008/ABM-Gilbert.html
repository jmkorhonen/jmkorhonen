<!DOCTYPE html> 
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	
    <title>ABM-Gilbert</title>

    <meta name="generator" content="Zim Zim 0.73.5, based on the Ecodiv-responsive template">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <!-- <link href='http://fonts.googleapis.com/css?family=Open+Sans:300&subset=latin,greek,latin-ext' rel='stylesheet' type='text/css'> -->

    <!-- Scripts -->
    <script type='text/javascript' src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-2.1.1.min.js"></script>
    <script src="https://code.jquery.com/mobile/1.4.3/jquery.mobile-1.4.3.min.js"></script>
    
    <!-- !! Different stylesheets for different screen sizes. Adapt to your likening-->
    <link rel="stylesheet" href="https://code.jquery.com/mobile/1.4.3/jquery.mobile-1.4.3.min.css" />
    <link rel="stylesheet" media="screen and (min-width: 741px)" href=..\..\_resources\style.css>
    <link rel="stylesheet" media="screen and (max-width: 740px)" href=..\..\_resources\style_mobile.css>

</head>
<body onload="$.mobile.silentScroll(window.scrollY);" <!-- fix for jquery-mobile always scrolling to top at loading, see https://stackoverflow.com/questions/15255719/jquery-mobile-prevent-scroll-to-top-before-page-transition --> > 
    
    <!-- See the Zim help file on templates for options -->    <div class="container">
        <div data-role="page" class="ui-responsive-panel">
            
            <!-- Header / title -->
    
            <div data-role="header" data-position="fixed">
                <a href="#nav-panel" data-icon="bars">Table of content</a> 
                
                <!-- !! Fill in the website title, by default: Notebook -->
                <h1>Notebook - ABM-Gilbert</h1> 
                
                <!-- !! Optionally, create button with custom link. To apply uncomment the next line and fill in the link (and optionally change the button and text)) -->
                <!-- <a href="http://my.website.org" data-icon="home">Main website</a> -->
                
            </div>
            
            <!-- Warning message if java script is disabled -->
            <noscript>
                <div style="border: 1px solid purple; padding: 10px">
                    <span style="color:red">This page is best viewed with JavaScript enabled!</span>
                </div>
            </noscript>

            <!-- Page content -->
            
            <div data-role="content" class="content">
                    <h1>ABM-Gilbert <a name='V:2008:ABM-Gilbert'></a></h1>
    
                    <p>
Created:<br>
<span class="zim-tag">@2016</span> <span class="zim-tag">@ABM</span> <span class="zim-tag">@Modeling</span> <span class="zim-tag">@Summary</span> <span class="zim-tag">@Book</span> 
</p>

<p>
Gilbert, Nigel (2008). <i>Agent-Based Models (Quantitative Applications in the Social Sciences), 1st Edition. </i>SAGE. 
</p>

<p>
Notes from book
</p>

<p>
Preface<br>
xi<br>
Agent-based modeling is a form of computational scmulation.<br>
... is particulary suited to topics where understanding processes and their consequences is important.
</p>

<p>
ABMs have to be<br>
- complete<br>
- consistent<br>
- unambiguous
</p>

<p>
But they can include <br>
- heterogeneous agents<br>
- far from equilibrium situatcons<br>
- interaction between agents
</p>

<p>
2
</p>

<p>
Abm is a form of computational social science. <br>
advantages:<br>
- forces one to be precise<br>
- often relatively easy to model theories about processes
</p>

<p>
3
</p>

<p>
- experiments are possible; treatments can be applied<br>
- difficulties of isolation and ethical problems not present
</p>

<pre>
 4
</pre>

<p>
Models come in different flavours<br>
- scale models<br>
- ideal type models<br>
- analogical models
</p>

<p>
These are not mutually exclusive categories!
</p>

<p>
5
</p>

<p>
A crucial feature of agent-based models is that the agents can interact, that is, they pass informational messages to each other and act on the basis of what they learn from these messages.
</p>

<p>
8
</p>

<p>
Opinion dynamics<br>
- how extreme and marginal opinions manage to become the norm in populations?<br>
- Deffuant et al. have a model where agents have an opinion - a real number between -1 and 1 - and a degree of doubt about their opinion, called uncertainty, which is a positive real number<br>
Agents opinion segment is defined a the band centred on the agents opinion, spreading to the right and left by the agents value for uncertainty.<br>
Meeting agents influence one another if their opinions overlap; the opinion of one agent is affected by the opinion of the other agent by an amount proportional to the difference between their opinions, multiplied by the amount of overlap divided by influencing agents uncertainty minus 1.
</p>

<p>
11 
</p>

<p>
Customer modeling <br>
Izquierdo and Izquierdo (2006) : the authors consider markets such as the second-hand car market, where there is quality variability and quality uncertainty. The study explores how quality variability <br>
can damage a market and affect consumer confidence. Two agent roles: buyers and seller. Sellers sell products by calculating the minimum prize they will accept, and buyers buy products by offering a price based on the expected quality of the product. The expected quality is based on experience, and either just of the agent or accumulated from the agents peers over its social network. There are a finite number of products in the system, buyers and sellers perform one deal per round, and the market is cleared every round as these deals are done. The social network is created by random connections. <br>
Finding : without a social network, consumer confidence fell to a point where the market was no longer viable, whereas with a social network, the aggregation of the agents own experience and the more positive collective experience of others (which is not so volatile) helped to maintain the markets stability. 
</p>

<p>
12
</p>

<p>
Electricity markets<br>
- agents supply companies that make oifers to the simulated market to provide a certain quantity of electricity at a certain period<br>
13<br>
- simulation can study cnditions under which the market price comes down to near the marginal cost of generation e.g.
</p>

<p>
Most of the current models allow the agent to learn trading strategies - REINFORCEMENT LEARNING, SEE ALSO SECTION 5.2.1.<br>
- starts by using a random strategy from a common pool of strategies<br>
- if the str is accepted and profitable, the value of the strategy is reinforced and ths p of using it in similar situations is increased - see (Roth &amp; Erev 1995)
</p>

<p>
COMPANION MODELING
</p>

<p>
- buicding an ABM in close association with informants selected from the people on the ground
</p>

<p>
14
</p>

<pre>
 THE FEATURES OF ABM
</pre>

<p>
See also: (Fagiolo, Windrum &amp; Moneta 2006)
</p>

<p>
<ol type="1" start="1">
<li>Ontological correspondence (direct correspondence between agents and real-world actors)</li>
<li>Heterogeneous agents</li>
<li>Representation of the environment</li>
<li>Agent interactions</li>
<li>Bounded rationality (the problem usually in extending the intelligence of agents, not limiting their rationality)</li>
<li>Learning (can be modelled in 3 ways: </li>
</ol>
- individual learning<br>
- evolutionary learning<br>
- social learning)
</p>

<p>
16
</p>

<p>
OTHER RELATED MODELING APPROACHES
</p>

<p>
- microsimulation (advancing samples through time)<br>
- system dynamics (based on the evaluation of sets of simultaneous differential or difference equations; deals with aggregate, rather than wity individual agents; -&gt; hard to model heterogeneity &amp; represent agent behavior)
</p>

<p>
21 
</p>

<p>
AGENTS, ENVIRONMENTS, AND TIMESCALES
</p>

<p>
AGENTS
</p>

<p>
(Woolridge &amp; Jennings 1995) describe 4 important features:<br>
<ol type="1" start="1">
<li>Autonomy</li>
<li>Social ability</li>
<li>Reactivity</li>
<li>Proactivity</li>
</ol>
</p>

<p>
However, a more helpful way of describing agents is to say they have the following chazacteristics:
</p>

<p>
<ol type="1" start="1">
<li>Perception</li>
<li>Performance, often including following:</li>
</ol>
A) motion<br>
B) communication<br>
C) action<br>
<ol type="1" start="3">
<li>Memory</li>
<li>Policy</li>
</ol>
</p>

<p>
27
</p>

<p>
RANDOMNESS
</p>

<p>
- useful for abstracting from the complexity of the real world<br>
- or to model communication errors and the influence of "noise"
</p>

<br>

<p>
30
</p>

<pre>
 3. USING AGENT-BASED MODELS IN SOCIAL SCIENCE RESEARCH
</pre>

<p>
- better to be specific<br>
...the usual kind of research question for abm are ones where regularities at the societal or macro level have been observed, and the issue is how these may be explained. <br>
- i.e. STYLIZED FACTS of economists (Kaldor 1961)
</p>

<p>
Steps in ABM<br>
<ol type="1" start="1">
<li>Specify the RQ clearly</li>
<li>Identify macro-level regularities that are to be explained</li>
<li>Specify the agents that are to be involved in the model</li>
</ol>
- for each type of agent, one needs to lay out the agents behavior in different circumstances, often as a set of condition-action rules<br>
- often helpful to do this in the form of 2 lists: one shows all the different ways in which the env. Ccan affect the agent,and one showing all the ways in which the agent can affect the env (including other agents). Then, one can write down the conditions when the agent has to react, and when it will need to act.
</p>

<p>
70
</p>

<p>
5.2.1 Reinforcement learning
</p>

<p>
The env is set up so that it will eventually provide a reward. The agent has to find a _policy_ that maximizes the reward it receives (Sutton &amp; Barto 1998)<br>
Usually, each additional szep along theway to goal redoces the reward
</p>

<p>
Well suited to problems in which the env and reward structure remain constant during sim run - does badly in more dynamic env, esp when all the agents are learning and actions of 1 affect the state or rewards of others
</p>

<p>
71
</p>

<p>
EVOLUTIONARY COMPUTATION
</p>

<p>
(Eiben &amp; Smith 2003) (Engelbrecht 2002)
</p>

<p>
- usually very efficient optimization device; may not be that good model of social phenomenon (Chattoe 1998)<br>
(Determining fitness may be tricky)
</p>

<p>
Uses:<br>
- firms that learn customer preferences (Sallans et al. 2003)<br>
- decision making in organizations (Sun &amp; Naveh 2004)
</p>

                    <br></br>
                    
                    <hr class='footnotes'>
                    <span class="backlinks">
                        <hr class='footnotes'>
                        <b>Backlinks:</b>
                        <a href='..\..\INDEX\METHODS\ABM.html'>index:METHODS:ABM</a>
                        
                        <a href='..\..\INDEX\ALGORITHMS\Evolutionary\Models.html'>index:ALGORITHMS:Evolutionary:Models</a>
                        
                        <a href='..\..\INDEX\PHILOSOPHY\Science\Models.html'>index:PHILOSOPHY:Science:Models</a>
                        <br /><br />
                    </span>
    
                <!-- !! The script will center all images. If you prefer the default (images at left delete these three lines -->    
                <script>
                    $( "img" ).wrap( "<div class='imgcenter'></div>" );
                </script>
    
                
            </div>
            
            <!-- Navigation panel -->
            
            <div data-role="panel" data-position-fixed="true" data-display="reveal" data-theme="a" id="nav-panel" data-dismissible="false">
                <div style="display:inline-block;">
                    
                    <!-- !! If you want to place your logo, uncomment the next section and fill in the link between the quotation marks after href if you want the logo to link to another page or website -->
                    <!-- <div id="logos" align="center">
                        <a title="your title" href="" target="_blank">
                            <img src=..\..\_resources\zim_logo.png style="border-style:none" align="right"></a>
                    </div> -->
                    
                    <div>
                        <!-- !! optionally.. add your custom search engine script -->
                        <a href="#header" data-rel="close" data-role="button" data-theme="a" data-icon="delete" data-inline="true">Close panel</a>
    
                        <!-- !! optionally.. add link to start page or index page. To do so, uncomment the next 2 lines and fill in the webpage name / url-->
                        <!-- <br></br>
                        <a href="./link-to-start-page.html">Name of page</a>-->
                        
                        <!-- Generate the links to other pages (between-pages table of contents -->
                        <ul>
<li><a href="..\..\INDEX.html" title="INDEX" class="page">INDEX</a></li>
<li><a href="..\..\PLAN_B.html" title="PLAN B" class="page">PLAN B</a></li>
<li><a href="..\..\V.html" title="V" class="page">V</a>
<ul>
<li><a href="..\1846.html" title="1846" class="page">1846</a></li>
<li><a href="..\1852.html" title="1852" class="page">1852</a></li>
<li><a href="..\1854.html" title="1854" class="page">1854</a></li>
<li><a href="..\1858.html" title="1858" class="page">1858</a></li>
<li><a href="..\1861.html" title="1861" class="page">1861</a></li>
<li><a href="..\1864.html" title="1864" class="page">1864</a></li>
<li><a href="..\1888.html" title="1888" class="page">1888</a></li>
<li><a href="..\1910.html" title="1910" class="page">1910</a></li>
<li><a href="..\1920.html" title="1920" class="page">1920</a></li>
<li><a href="..\1921.html" title="1921" class="page">1921</a></li>
<li><a href="..\1922.html" title="1922" class="page">1922</a></li>
<li><a href="..\1925.html" title="1925" class="page">1925</a></li>
<li><a href="..\1926.html" title="1926" class="page">1926</a></li>
<li><a href="..\1928.html" title="1928" class="page">1928</a></li>
<li><a href="..\1933.html" title="1933" class="page">1933</a></li>
<li><a href="..\1934.html" title="1934" class="page">1934</a></li>
<li><a href="..\1944.html" title="1944" class="page">1944</a></li>
<li><a href="..\1946.html" title="1946" class="page">1946</a></li>
<li><a href="..\1947.html" title="1947" class="page">1947</a></li>
<li><a href="..\1949.html" title="1949" class="page">1949</a></li>
<li><a href="..\1950.html" title="1950" class="page">1950</a></li>
<li><a href="..\1952.html" title="1952" class="page">1952</a></li>
<li><a href="..\1954.html" title="1954" class="page">1954</a></li>
<li><a href="..\1956.html" title="1956" class="page">1956</a></li>
<li><a href="..\1958.html" title="1958" class="page">1958</a></li>
<li><a href="..\1959.html" title="1959" class="page">1959</a></li>
<li><a href="..\1966.html" title="1966" class="page">1966</a></li>
<li><a href="..\1967.html" title="1967" class="page">1967</a></li>
<li><a href="..\1969.html" title="1969" class="page">1969</a></li>
<li><a href="..\1970.html" title="1970" class="page">1970</a></li>
<li><a href="..\1972.html" title="1972" class="page">1972</a></li>
<li><a href="..\1973.html" title="1973" class="page">1973</a></li>
<li><a href="..\1975.html" title="1975" class="page">1975</a></li>
<li><a href="..\1976.html" title="1976" class="page">1976</a></li>
<li><a href="..\1977.html" title="1977" class="page">1977</a></li>
<li><a href="..\1978.html" title="1978" class="page">1978</a></li>
<li><a href="..\1980.html" title="1980" class="page">1980</a></li>
<li><a href="..\1981.html" title="1981" class="page">1981</a></li>
<li><a href="..\1982.html" title="1982" class="page">1982</a></li>
<li><a href="..\1983.html" title="1983" class="page">1983</a></li>
<li><a href="..\1984.html" title="1984" class="page">1984</a></li>
<li><a href="..\1985.html" title="1985" class="page">1985</a></li>
<li><a href="..\1986.html" title="1986" class="page">1986</a></li>
<li><a href="..\1987.html" title="1987" class="page">1987</a></li>
<li><a href="..\1988.html" title="1988" class="page">1988</a></li>
<li><a href="..\1989.html" title="1989" class="page">1989</a></li>
<li><a href="..\1990.html" title="1990" class="page">1990</a></li>
<li><a href="..\1991.html" title="1991" class="page">1991</a></li>
<li><a href="..\1992.html" title="1992" class="page">1992</a></li>
<li><a href="..\1993.html" title="1993" class="page">1993</a></li>
<li><a href="..\1994.html" title="1994" class="page">1994</a></li>
<li><a href="..\1995.html" title="1995" class="page">1995</a></li>
<li><a href="..\1996.html" title="1996" class="page">1996</a></li>
<li><a href="..\1997.html" title="1997" class="page">1997</a></li>
<li><a href="..\1998.html" title="1998" class="page">1998</a></li>
<li><a href="..\1999.html" title="1999" class="page">1999</a></li>
<li><a href="..\2000.html" title="2000" class="page">2000</a></li>
<li><a href="..\2001.html" title="2001" class="page">2001</a></li>
<li><a href="..\2002.html" title="2002" class="page">2002</a></li>
<li><a href="..\2003.html" title="2003" class="page">2003</a></li>
<li><a href="..\2004.html" title="2004" class="page">2004</a></li>
<li><a href="..\2005.html" title="2005" class="page">2005</a></li>
<li><a href="..\2006.html" title="2006" class="page">2006</a></li>
<li><a href="..\2007.html" title="2007" class="page">2007</a></li>
<li><a href="..\2008.html" title="2008" class="page">2008</a>
<ul>
<li><b>ABM-Gilbert</b></li>
<li><a href="./AncientGreeceSeer-Flower.html" title="AncientGreeceSeer-Flower" class="page">AncientGreeceSeer-Flower</a></li>
<li><a href="./BaconOriginsExperimentation-Merchant.html" title="BaconOriginsExperimentation-Merchant" class="page">BaconOriginsExperimentation-Merchant</a></li>
<li><a href="./CollapseReview-Tainter.html" title="CollapseReview-Tainter" class="page">CollapseReview-Tainter</a></li>
<li><a href="./EnvEthicsAndSpaceExploration-Daly.html" title="EnvEthicsAndSpaceExploration-Daly" class="page">EnvEthicsAndSpaceExploration-Daly</a></li>
<li><a href="./EnvPoliticsInnovation-Kivimaa.html" title="EnvPoliticsInnovation-Kivimaa" class="page">EnvPoliticsInnovation-Kivimaa</a></li>
<li><a href="./GrowthEnvironmentResources-Greiner.html" title="GrowthEnvironmentResources-Greiner" class="page">GrowthEnvironmentResources-Greiner</a></li>
<li><a href="./InequalEnv-Boyce.html" title="InequalEnv-Boyce" class="page">InequalEnv-Boyce</a></li>
<li><a href="./LCAbiomassFossilPower-Bauer.html" title="LCAbiomassFossilPower-Bauer" class="page">LCAbiomassFossilPower-Bauer</a></li>
<li><a href="./LCAcoalCCS-Koornneef.html" title="LCAcoalCCS-Koornneef" class="page">LCAcoalCCS-Koornneef</a></li>
<li><a href="./LCACSPneeds-Viebahn.html" title="LCACSPneeds-Viebahn" class="page">LCACSPneeds-Viebahn</a></li>
<li><a href="./LimitsToGrowthComparison-Turner.html" title="LimitsToGrowthComparison-Turner" class="page">LimitsToGrowthComparison-Turner</a></li>
<li><a href="./PPL.html" title="PPL" class="page">PPL</a></li>
<li><a href="./PredatorState-Galbraith.html" title="PredatorState-Galbraith" class="page">PredatorState-Galbraith</a></li>
<li><a href="./RationalityForMortals-Gigerenzer.html" title="RationalityForMortals-Gigerenzer" class="page">RationalityForMortals-Gigerenzer</a></li>
<li><a href="./ReviewFallingBehind-Leonard.html" title="ReviewFallingBehind-Leonard" class="page">ReviewFallingBehind-Leonard</a></li>
<li><a href="./ReviewQuestioningExpertise-Briggle.html" title="ReviewQuestioningExpertise-Briggle" class="page">ReviewQuestioningExpertise-Briggle</a></li>
<li><a href="./RichDestroyEarth-Kempf.html" title="RichDestroyEarth-Kempf" class="page">RichDestroyEarth-Kempf</a></li>
<li><a href="./ScientificRealism-Sankey.html" title="ScientificRealism-Sankey" class="page">ScientificRealism-Sankey</a></li>
<li><a href="./Spiders-Penna-Gon??alves.html" title="Spiders-Penna-Gon??alves" class="page">Spiders-Penna-Gon??alves</a></li>
<li><a href="./SuomiVaaranVuodet-Seppinen.html" title="SuomiVaaranVuodet-Seppinen" class="page">SuomiVaaranVuodet-Seppinen</a></li>
<li><a href="./Supersonic-Conway.html" title="Supersonic-Conway" class="page">Supersonic-Conway</a></li>
<li><a href="./TechCognitiveLens-Kaplan.html" title="TechCognitiveLens-Kaplan" class="page">TechCognitiveLens-Kaplan</a></li>
<li><a href="./Technonationalism-Waqar.html" title="Technonationalism-Waqar" class="page">Technonationalism-Waqar</a></li>
<li><a href="./TechOfPolicing-Manning.html" title="TechOfPolicing-Manning" class="page">TechOfPolicing-Manning</a></li>
<li><a href="./WealthOfNations-Comin.html" title="WealthOfNations-Comin" class="page">WealthOfNations-Comin</a></li>
</ul>
</li>
<li><a href="..\2009.html" title="2009" class="page">2009</a></li>
<li><a href="..\2010.html" title="2010" class="page">2010</a></li>
<li><a href="..\2011.html" title="2011" class="page">2011</a></li>
<li><a href="..\2012.html" title="2012" class="page">2012</a></li>
<li><a href="..\2013.html" title="2013" class="page">2013</a></li>
<li><a href="..\2014.html" title="2014" class="page">2014</a></li>
<li><a href="..\2015.html" title="2015" class="page">2015</a></li>
<li><a href="..\2016.html" title="2016" class="page">2016</a></li>
<li><a href="..\2017.html" title="2017" class="page">2017</a></li>
<li><a href="..\2018.html" title="2018" class="page">2018</a></li>
<li><a href="..\2019.html" title="2019" class="page">2019</a></li>
<li><a href="..\2020.html" title="2020" class="page">2020</a></li>
<li><a href="..\2021.html" title="2021" class="page">2021</a></li>
<li><a href="..\CONFS.html" title="CONFS" class="page">CONFS</a></li>
<li><a href="..\Databases.html" title="Databases" class="page">Databases</a></li>
<li><a href="..\Journals.html" title="Journals" class="page">Journals</a></li>
<li><a href="..\Literature_Review_-_Capitalism_and_Growth.html" title="Literature Review - Capitalism and Growth" class="page">Literature Review - Capitalism and Growth</a></li>
<li><a href="..\Unsorted.html" title="Unsorted" class="page">Unsorted</a></li>
</ul>
</li>
<li><a href="..\..\ZK.html" title="ZK" class="page">ZK</a></li>
</ul>


                        <!-- Current document's Table Of Contents placeholder and style, this table of content will be generated from headers in the document -->
                        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.11.1/tocbot.css">
                        <style src="text/css">
                        .toc-link, .toc-list-item, .toc-list-item a {
                            /* Remove underlining for all toc entries */
                            text-decoration: none;
                        }
                        .toc-link:not(.is-active-link) {
                            /* Only leave the active toc entry (currently watched) as bold, else put text in normal weight */
                            font-weight: normal !important;
                        }
                        </style>
                        <nav class="toc js-toc relative z-1 transition--300 pa4" style="position: relative; max-width:inherit;">
                        </nav>

                        <!-- !! Optionally, button which brings the user to your contact form. To enable this, remove comment mark below and fill in the link between the quoation marks after href -->
                        <!--<br></br>
                        <a title="Contact us" data-icon="info" href="" data-role="button" target="_blank">Contact us</a>-->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Generate the Table Of Contents dynamically using javascript (via tocbot) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.11.1/tocbot.min.js"></script>
    <script type="text/javascript">
    var content = document.body
    var headings = content.querySelectorAll('h1, h2, h3, h4, h5, h6, h7')
    var headingMap = {}

    <!-- generate ids dynamically for each header, that's necessary for tocbot to work, source makeids from tocbot repository -->
    Array.prototype.forEach.call(headings, function (heading) {
        var id = heading.id ? heading.id : heading.textContent.trim().toLowerCase()
            .split(' ').join('-').replace(/[!@#$%^&*():]/ig, '').replace(/\//ig, '-')
        headingMap[id] = !isNaN(headingMap[id]) ? ++headingMap[id] : 0
        if (headingMap[id]) {
            heading.id = id + '-' + headingMap[id]
        } else {
            heading.id = id
        }
        // Add a self-referential link on the header's anchor, easier to share + jump to this anchor if clicked
        heading.innerHTML = "<a href=\"#"+id+"\" onclick=\"jumpToAnchor('"+id+"');\";>"+heading.innerHTML+"</a>"
    })

    function jumpToAnchor(anchorId) {
    // jump to an anchor
    // from: https://stackoverflow.com/a/52138511/1121352
    $(document).ready(function() {
        // Pure JS solution, that doesn't cause the window to go back to the top before sliding to the anchor
        const element = document.querySelector('#'+anchorId)
        const topPos = element.getBoundingClientRect().top + window.pageYOffset

        window.scrollTo({
            top: topPos, // scroll so that the element is at the top of the view
            behavior: 'smooth' // smooth scroll
        })
        // JQuery solution
        /*
        $('html, body').animate({
            'scrollTop':   $('#'+anchorId).offset().top
        }, 500);
        */
        // Ensure the anchor is added in the URL so the user can more easily copy the link and share from the browser's address bar directly
        location.hash = "#" + anchorId;
    });
    }; // }(JQuery);

    <!-- initialize tocbot with some options -->
    tocbot.init({
      // Where to render the table of contents.
      tocSelector: '.js-toc',
      // Where to grab the headings to build the table of contents.
      contentSelector: '.content',
      // Which headings to grab inside of the contentSelector element.
      headingSelector: 'h1, h2, h3, h4, h5, h6',
      // For headings inside relative or absolute positioned containers within content.
      hasInnerContainers: true,
      // Header levels collapsing by default
      collapseDepth: 2,
    });

    <!-- ensure the window is scrolled to the anchor after the page finished loading (else jquery may scroll back to top, particularly on mobile) -->
    document.addEventListener('DOMContentLoaded', function() {
        anchor = window.top.location.hash;
        anchor = anchor.split("#").pop();
        jumpToAnchor(anchor);
    }, false);
    </script>

</body>
</html>
